<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>在线程序实验平台-主页</title>
    <link rel="stylesheet" href="templates/css/bootstrap.css">
</head>
<body>
<script src="templates/js/jquery-3.4.1.min.js"></script>
<script src="templates/js/bootstrap.js"></script>
<style>
    .carousel-inner img {
        width : 100% ;
    }

    .carousel .item {
        height: 500px;
        background-color: #777;
    }
    .carousel-inner > .item > img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 500px;
    }
</style>

<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="/home">首页</a>
        </div>
        <ul class="nav nav-pills">
            <li role="presentation" id="username"><a href="login">请登录</a></li>
            <li role="presentation"><a href="mine">我的</a></li>
        </ul>
    </div>
</nav>

//巨幕
<div id="carousel-example-generic" class="carousel slide"data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-slide-to="0" data-target="#carousel-example-generic" class="active"></li>
        <li data-target="#carousel-example-generic" data-slide-to="1"></li>
        <li data-target="#carousel-example-generic" data-slide-to="2"></li>
    </ol>

    <div class="carousel-inner" role="listbox">
        <div class="item active" data-small-image>
            <img src="templates/images/1.jpg" alt="..."class="img-responsive">
            <div class="carousel-caption">
                啦啦啦啦啦
            </div>
        </div>
        <div class="item">
            <img src="templates/images/2.png" alt="..."class="img-responsive">
            <div class="carousel-caption">
                llalla
            </div>
        </div>
        <div class="item">
            <img src="templates/images/3.jpg" alt="..."class="img-responsive">
            <div class="carousel-caption">
                llalla
            </div>
        </div>


    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
    </div>
</div>

<nav class="navbar">
    <div class="container" style="text-align:center">
        <ul class="list-inline">
            <li class="active"><button class="btn btn-link" type="button" value="recentCourses" style="height:50px" onclick="loadCourses('recent')" autofocus="autofocus">最近的新课程</button></li>
            <li> <button class="btn btn-link" type="button" value="popularCourses" style="height:50px" onclick="loadCourses('popular')">最火的课程</button></li>
            <li>Item 3</li>
            <li>Item 4</li>
        </ul>
    </div>
</nav>

<div class="row" id="coursesBox">
<!--    <div class="col-sm-6 col-md-6">-->
<!--        <div class="thumbnail">-->
<!--            <div class="caption text-center">-->
<!--                <h3>课程名</h3>-->
<!--                <p class="introduction">balalalalalalaal</p>-->
<!--                <p class="courselink"><a href="courseDetail" class="btn btn-info" role="button">课程详情</a></p>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
</div>

<script>
    $(document).ready(function (){
        $.ajax({
            url:"/loginOrNot",
            type:"get",
            success:function (data){
                if(data.name){
                    $("#username").html("欢迎"+data.name);
                }
            }
        });
        loadCourses("recent");
    });

    function loadCourses(string){
        var s1="recent";
        var s2="popular";
        var coursesBox=$("#coursesBox");
        if(string==s1){
            $.ajax({
                url:"/course/recent",
                type:"get",
                success:function (data){
                    for(var i=0;i<data.length;i++) {
                        coursesBox.append("<div class=\"col-sm-6 col-md-6\"><div class=\"thumbnail\">" +
                            "<div class=\"caption text-center\">" +
                            "<h3>"+
                            data[i].name+
                            "</h3>"+
                            "<p class=\"introduction\">"+
                            data[i].introduction+
                            "<p class=\"courselink\"><a href=\"courseDetail\"" +
                            data[i].id+
                            "\" class=\"btn btn-info\" role=\"button\">课程详情</a></p></div></div>"
                        );
                    }
                }
            })
        }
        if(string==s2){
            $.ajax({
                url:"/course/popular",
                type:"get",
                success:function (data){
                    coursesBox.append("<div class=\"col-sm-6 col-md-6\"><div class=\"thumbnail\">" +
                        "<div class=\"caption text-center\">" +
                        "<h3>"+
                        data[i].name+
                        "</h3>"+
                        "<p class=\"introduction\">"+
                        data[i].introduction+
                        "<p class=\"courselink\"><a href=\"courseDetail\"" +
                        data[i].id+
                        "\" class=\"btn btn-info\" role=\"button\">课程详情</a></p></div></div>"
                    );
                }
            })
        }
    }

</script>

</body>
</html>