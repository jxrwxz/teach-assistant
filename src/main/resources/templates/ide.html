<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IDE</title>
    <link rel="stylesheet" href="/templates/css/bootstrap.css">
</head>
<body>
<script src="/templates/js/jquery-3.4.1.min.js"></script>
<script src="/templates/js/bootstrap.js"></script>

<div id="all"style="background: lightgrey;bottom:0px">
    <nav class="navbar navbar-default navbar-fixed-top"style="background: #96b97d">
        <div class="container">
            <div class="navbar-header">
                <h1 onclick="window.open('/home')">欢迎来到在线课程学习平台！</h1>
            </div>
        </div>
    </nav>

    <div class="container"style="margin-top: 5.5%">
        <div class="row">
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-12 text-right">
                        <button type="button"class="btn btn-default"style="background: #0a6999;color:white;margin-top: 1%"onclick="compileCode()"><span class="glyphicon glyphicon-send"></span>点击运行</button>
                    </div>
                    <div class="col-md-12"style="margin-top: 7px">
                        <textarea id="myInput" name="myInput"style="width:100%;height:480px;padding:5px">public class Main {
    public static void main(String[] args) {

    }
}
                        </textarea>
                    </div>
                </div>
            </div>
            <div class="col-md-6"style="background: white;margin-top: 46px;border: 1px black;margin-bottom: 18px">
                <div class="row">
                    <div class="col-md-12 pre-scrollable" id="undoAssignments"style="height:158px">
                        <h3 class="text-center"><span class="glyphicon glyphicon-list-alt"></span>未完成的作业</h3>
                    </div>
                    <div class="col-md-12 pre-scrollable">
                        <textarea id="mySystemIn" name="mySystemIn"style="width:100%;height:158px" placeholder="请输入System Input的内容"></textarea>
                    </div>
                    <div class="col-md-12 pre-scrollable">
                        <div id="result"style="height:158px;width:100%">测试结果</div>
                    </div>
                </div>
            </div>
        </div>
    </div>



</div>

<script>
    $(document).ready(function(){
        $.ajax({
            url:"/allUndoAssignments",
            type:"get",
            success:function (data){
                for(i=0;i<data.length;i++){
                    $("#undoAssignments").append("<p>" + data[i].courseName + "</p>"
                        + "<p>第"+ data[i].serialNumber +"次布置的作业</p>"
                        + "<p>题目：" + data[i].name + "</p><hr style=\"width:100%;color:slategrey\">"
                    );
                }
            }
        })
    });
    function compileCode(){
        var data={
            code:$("#myInput").val(),
            systemIn:$("#mySystemIn").val()
        };

        $.ajax({
            url:"/ide",
            type:"post",
            data:data,
            success:function (data2){
                $("#result").html("<p>" + data2.result + "</p>");
            }
        });
    }
</script>

</body>
</html>